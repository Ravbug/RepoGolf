<html>
    <head>
        <title>RepoGolf</title>
        <meta charset="utf-8">
        <meta name="description" content="Who is the fattest of them all?">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link id="favicon" rel="icon" href="ravbug.png" type="image/x-icon">

          <!-- Social embed image -->
        <meta property="og:image" content="https://avatars2.githubusercontent.com/u/22283943">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="1024">
        <meta property="og:image:height" content="1024">
        <style>
            *{
                font-family: system-ui
            }
        </style>
    </head>
    <body>
        <div id="graph-files"></div>
        <div id="graph-bytes"></div>
        <div id="graph-ratio"></div>
    </body>
    <script src="plotly.js" style="width:100%;height:250px;"></script>
    <script>
        // file count graph
        async function go(){
            const data = await((await fetch("output.json")).json())
            const config = {
                    responsive: true
                } 
            {
                const counts = []
                for(const [name,entries] of Object.entries(data)){
                    counts.push(entries["count"])
                }
                Plotly.newPlot( 
                    "graph-files", 
                    [
                    {
                        x: Object.keys(data),
                        y: counts,
                        type: 'bar' 
                    }
                    ], 
                    {
                        title: "Codebases by File Count",
                    },
                    config
                );
            }

            {
                const counts = []
                for(const [name,entries] of Object.entries(data)){
                    counts.push(entries["size"])
                }
                Plotly.newPlot( 
                    "graph-bytes", 
                    [
                    {
                        x: Object.keys(data),
                        y: counts,
                        type: 'bar' 
                    }
                    ], 
                    {
                        title: "Codebases by Total Bytes",
                    },
                    config
                );
            }

            {
                const counts = []
                for(const [name,entries] of Object.entries(data)){
                    counts.push(entries["count"] / entries["size"])
                }
                Plotly.newPlot( 
                    "graph-ratio", 
                    [
                    {
                        x: Object.keys(data),
                        y: counts,
                        type: 'bar' 
                    }
                    ], 
                    {
                        title: "Codebases by Files 'Per Capita'",
                    },
                    config
                );
            }
        }
        go()
    </script>
</html>